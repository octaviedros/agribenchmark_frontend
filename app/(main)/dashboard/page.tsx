import { z } from "zod"
import { farmSchema } from "@/data/schema"
import { DashboardClient } from "./DashboardClient"
import type { Metadata } from "next";
import { getFarms } from "@/lib/utils";

export const metadata: Metadata = {
  title: "Dashboard | agribenchmark",
  description: "Generated by global networks",
};

interface FarmProps {
  farm_id: string
  networks: string[],
  [key: string]: unknown
}

export default async function Dashboard() {
  // TODO: Fetch data from the database
  const farms = await getFarms()
  const validatedFarms = z.array(farmSchema).parse(farms)

  return <DashboardClient initialFarms={validatedFarms} />
}